{% extends 'base.html' %} {% block content %} {% load bootstrap_tags %} {% load index_tag %}

<!--FEATURES-->
{% block headerTag %}
<header id="GIF"> {% endblock headerTag %}
    <div class="container-fluid">
        <div class="row">
            <div class="col-10 offset-1 intro">
                <div class="row">

                    <div class="card ftcard">
                        <div class="card-body">
                            <h5 class="card-title">Help save the Unicorn!</h5>
                            <p>Become a citizen-scientist and help save the unicorn! By downloading our app and spotting unicorns, you can add important information to our research project on the distribution on unicorns and the threats they face! Join Join
                                us now!</p>
                        </div>
                    </div>
                </div>
                {% endblock %} {% block home %}

                <!--POSSIBLE NEW FEATURES-->
                <section id="features">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-10 offset-1">
                                <div class="row">


                                    <div class="col-12">
                                        <div class="infocard card">
                                            <div class="card-body">
                                                <h2>Support upcoming features!</h2>
                                                <p class="card-text">Support new features for our app so we can save the Unicorn together! Contribute however much you like, and once we hit our goal, we will develop the feature and add it to the app.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel" data-interval="false">
                                            <div class="carousel-inner">
                                                {% for feature in productFeatures %} {% if forloop.counter0|divisibleby:3 %} {% if forloop.counter0 == 0 %}
                                                <div class="carousel-item active">
                                                    <div class="row">
                                                        {% for feature in productFeatures|index:forloop.counter0 %}
                                                        <div class="col-6 col-md-4">
                                                            <div class="ftcard card featurecard">
                                                                <div class="card-body">
                                                                    <h5 class="card-title"><a href="/features/{{ feature.id }}">{{ feature.featureName }}</a></h5>
                                                                    <p class="card-text">{{ feature.description }}</p>
                                                                    <p class="feature-description">Raised: <i class="fas fa-euro-sign"></i> {% if feature.totalContributions %} {{feature.totalContributions}} {%else %}
                                                                        <span>0.00 </span> {% endif %} of <i class="fas fa-euro-sign"></i>{{ feature.price }} needed</p>
                                                                    <p class="feature-description">Requested by: {{ feature.author }}</p>

                                                                    <form method="post" action="{% url 'add_to_cart' feature.id %}">
                                                                        {% csrf_token %}
                                                                        <div class="input-group">
                                                                            <input name="contribution" type="number" min="10" max="10000" class="form-control" placeholder="Contribution" required='required'>
                                                                            <span class="input-group-btn"><button class="btn btn-success" type="submit">add</button></span>
                                                                        </div>
                                                                    </form>

                                                                </div>
                                                            </div>
                                                        </div>
                                                        {% endfor %}
                                                    </div>
                                                </div>


                                            </div>
                                        </div>
                                        {%else%}
                                        <div class="carousel-item">
                                            <div class="row">
                                                {% for feature in productFeatures %}-->
                                                <div class="col-6 col-md-4">
                                                    <div class="ftcard card">
                                                        <div class="card-body">
                                                            <h5 class="card-title"><a href="/features/{{ feature.id }}">{{ feature.featureName }}</a></h5>
                                                            <p class="card-text">{{ feature.description|truncatewords:7 }}</p>
                                                            <p class="feature-description">Raised: {{ feature.totalContributions }} of {{ feature.price }} needed</p>
                                                            <p class="feature-description">Requested by: {{ feature.author }}</p>

                                                            <form method="post" action="{% url 'add_to_cart' feature.id %}">
                                                                {% csrf_token %}
                                                                <div class="input-group">
                                                                    <input name="contribution" type="number" min="1" max="999" class="form-control" placeholder="Contribution">
                                                                    <span class="input-group-btn"><button class="btn btn-success" type="submit">add</button></span>
                                                                </div>
                                                            </form>

                                                        </div>
                                                    </div>
                                                </div>
                                                {% endfor %}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                {%endif%} {%endif%} {% endfor %}
                            </div>
                            <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"><i class="fas fa-arrow-left"></i></span>
    <span class="sr-only">Previous</span>
  </a>
                            <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"><i class="fas fa-arrow-right"></i></span>
    <span class="sr-only">Next</span>
  </a>
                        </div>
                    </div>
            </div>
        </div>

        </section>


        <!--Statistics on feature developement and bug-fixing-->
        <section id="stats">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-10 offset-1">
                        <div class="row">
                            <div class="col-12">
                                <div class="infocard card">
                                    <div class="card-body">
                                        <h2>Our track record</h2>
                                        <p class="card-text">We work hard to ensure our apps works perfectly for you. Please see below for our track record!</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6">
                                <div class="ftcard card featurecard">
                                    <div class="card-body">
                                        <h5>New feature development time</h5>
                                        <p>Pretty Graph</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-12 col-md-6">
                                <div class="ftcard card featurecard">
                                    <div class="card-body">
                                        <h5>Bug resolvement time</h5>
                                        <p>Pretty Graph</p>
                                    </div>
                                </div>
                            </div>
                            
                          
                        </div>
                    </div>
                </div>
            </div>
        </section>


<script>
// var data = '{{data|safe}}'

var data;
d3.json('/api/data', function(fdata, error) {
    
});
console.log(data)



    
</script>

        {% endblock %}
